
# –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑
FROM n8nio/n8n:latest

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è node-gyp –∏ pip
USER root
RUN apt-get update && apt-get install -y \
  build-essential \
  python3-dev \
  libffi-dev \
  libssl-dev \
  gcc \
  g++ \
  make \
  curl \
  git \
  && apt-get clean

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pip
RUN curl -sS https://bootstrap.pypa.io/get-pip.py | python3

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python-–±–∏–±–ª–∏–æ—Ç–µ–∫ –ø–æ –æ–¥–Ω–æ–π, —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
RUN for lib in \
    openai \
    numpy \
    requests \
    beautifulsoup4 \
    lxml \
    && echo "---"; do \
  echo "üì¶ pip install $lib" && pip install "$lib" || echo "‚ö†Ô∏è pip: $lib –Ω–µ –≤—Å—Ç–∞–ª, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º..."; \
done

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js-–±–∏–±–ª–∏–æ—Ç–µ–∫ –ø–æ –æ–¥–Ω–æ–π, —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
RUN for pkg in \
    axios \
    node-fetch \
    form-data \
    moment \
    date-fns \
    lodash \
    fs-extra \
    path \
    csv-parser \
    xml2js \
    js-yaml \
    xlsx \
    jsonwebtoken \
    simple-oauth2 \
    uuid \
    openai \
    @tensorflow/tfjs-node \
    langchain \
    langchain-openai \
    node-telegram-bot-api \
    discord.js \
    vk-io \
    whatsapp-web.js \
    fluent-ffmpeg \
    ffmpeg-static \
    yt-dlp-exec \
    google-tts-api \
    @vitalets/google-translate-token \
    node-wav \
    mongoose \
    ioredis \
    bcrypt \
    validator \
    joi \
    winston \
    dotenv \
    prom-client \
    node-downloader-helper \
    adm-zip \
    archiver \
    ; do \
  echo "üîß –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º $pkg..." && npm install -g "$pkg" || echo "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å $pkg, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º..."; \
done

# –í–æ–∑–≤—Ä–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
USER node
